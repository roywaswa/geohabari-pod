---
import Image from "astro/components/Image.astro";
import Layout from "../layout/Layout.astro";
import NairobiMap from "../images/cities/nairobi.svg"
import KampalaMap from "../images/cities/kampala.svg"
import team_members from '../data/team.json';

import '../styles/about.scss';
---

<Layout>
  <section class="container intro">
    <h3 class="heading">
      Welcome to Geohabari Podcast
    </h3>
    <h2>
      Amplifying African Tech Stories & Elevating Technical Brilliance
    </h2>
  </section>

  <section class="container identity">
    <h3 class="heading">
      who we are
    </h3>
    <div class="content">
      <Image
        src="https://plus.unsplash.com/premium_photo-1679079456790-bf73ddd14964?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
        alt="Identity Image"
        width={600}
        height={400}
        class="image"
      />
      <div class="desc">
        <h2>
          We are the new kids in the block that are challenging the norm ...
        </h2>
        <div class="details">
          <p>
            We focus on how technology intertwines with life and activities; BUT more than that, we focus on the voices, the people behind the scenes
          </p>
          <p>
            More than just a podcast. 
              <br/>We are a platform. 
              <br/>A lens. 
              <br/>A conversation
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="container misvis">
    <div class="misvis_text">
      <h3 class="heading">to what ends</h3>
      <div class="contaier-misvis">
        <div class="mission">
          <h3>MISSION</h3>
          <p>
            To amplify African geospatial and tech stories, making complex ideas simple, relatable, and impactful — one conversation at a time.
          </p>
          <Image
            src={NairobiMap}
            alt="Mission Image"
            width={220}
            height={220}
            class="misvis_map"
          />
        </div>
        <div class="vision">
          <Image
            src={KampalaMap}
            alt="Mission Image"
            width={220}
            height={220}
            class="misvis_map"
          />
          <h3>VISION</h3>
          <p>
            A world where African voices shape the narrative of innovation, technology, and place — from the ground up.
          </p>
        </div>
      </div>
    </div>
    <Image
      src="https://images.unsplash.com/photo-1642165870627-cd54c078a11f?q=80&w=685&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
      alt="Mission and Vision"
      width={600}
      height={400}
      class="mission_image"
    />
  </section>

  <section class="container purpose">
    <div class="intro">
      <h3 class="heading">why we exist</h3>
      <h2>
        We are Elevators and Amplifiers
      </h2>
      <p>
        Geospatial technology is everywhere — powering the apps we use, the cities we live in, the farms we depend on, and the decisions that shape our future. But too often, it feels distant, overly technical, or out of reach. Geohabari was created to change that.
      </p>
    </div>
    <div class="details">
      <Image
        src="https://plus.unsplash.com/premium_photo-1712254285216-26092c37cf8c?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
        alt="Purpose Image"
        width={600}
        height={200}
        class="purpose_image"
      />
      <div class="purpose_text">
        <p>
          We exist to demystify geospatial technology — to break it down, open it up, and let it speak in everyday language. But more than that, we're here to spotlight African innovation — the thinkers, builders, mappers, and dreamers who are solving real-world problems with homegrown solutions.
        </p>
        <h5>
          "When you understand space, you understand power. That's why we tell these stories."
        </h5>
      </div>
    </div>
  </section>


  <section class="container team">
    <h3 class="heading">
      Meet the Team
    </h3>
    <div class="team-carousel">
      <div class="team-thumbnails">
        {team_members.map((member, index) => (
          <div class={`team-thumbnail ${index === 0 ? 'active' : ''}`} data-index={index}>
            <img
              src={member.profile_photo}
              alt={member.name}
              class="thumbnail-photo"
              loading="lazy"
            />
          </div>
        ))}
      </div>
      
      <div class="team-spotlight">
        <div class="spotlight-image">
          <img
            src={team_members[0].profile_photo}
            alt={team_members[0].name}
            class="main-photo"
            id="main-photo"
            loading="lazy"
          />
        </div>
        
        <div class="spotlight-details">
          <h3 class="spotlight-name" id="spotlight-name">{team_members[0].name}</h3>
          <h4 class="spotlight-role" id="spotlight-role">{team_members[0].position}</h4>
          <p class="spotlight-bio" id="spotlight-bio">{team_members[0].bio}</p>
          <div class="social-links" id="social-links">
            {Object.entries(team_members[0].socials).map(([platform, url]) => (
              <a href={url} target="_blank" rel="noopener noreferrer">
                {platform.charAt(0).toUpperCase() + platform.slice(1)}
              </a>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>


<script>
import { gsap } from "gsap";


document.addEventListener("DOMContentLoaded", function() {
  // Team members data
  const teamMembers = [
    {
      name: "Yariwo Kitiyo",
      bio: "Yariwo is a geospatial enthusiast and the founder of Geohabari. With a background in GIS and remote sensing, he is passionate about storytelling and using technology to solve real-world problems.",
      position: "Founder & Host",
      profile_photo: "/images/team/yariwo.jpg",
      socials: {
        x: "https://twitter.com/yariwo",
        linkedin: "https://linkedin.com/in/yariwo",
        github: "https://github.com/yariwo",
        website: "https://yariwo.dev"
      }
    },
    {
      name: "Charles Mwangi",
      bio: "Charles is a geospatial analyst with expertise in spatial data visualization and cartography. He loves transforming complex datasets into compelling visual stories that resonate with audiences.",
      position: "Host",
      profile_photo: "https://images.ctfassets.net/bmflyv4pf0a9/1oHDc4M3S3HuxumJH85PIp/643ec66b92b4d8dc263f1951b3cae0b5/Charles_Mwangi.jpeg",
      socials: {
        x: "https://x.com/charlesmwangi",
        linkedin: "https://linkedin.com/in/charlesmwangi",
        github: "https://github.com/charlesmwangi",
        email: "mailto:charlesmwangi@geohabari.com"
      }
    },
    {
      name: "Linus Anari",
      bio: "Linus is a GIS specialist with a knack for geospatial data analysis and environmental applications. He is dedicated to leveraging geospatial technologies to address environmental challenges and promote sustainable development.",
      position: "Host",
      profile_photo: "/images/team/lanari.jpg",
      socials: {
        x: "https://x.com/charlesmwangi",
        linkedin: "https://linkedin.com/in/charlesmwangi",
        github: "https://github.com/charlesmwangi",
        email: "mailto:charlesmwangi@geohabari.com"
      }
    },
    {
      name: "Vincent Cheruiyot",
      bio: "Vincent is a visual creative making brands heard and seen.  Loves sports, music, and farm. Good in Geo.",
      position: "Visual Creative",
      profile_photo: "/images/team/vincent.jpeg",
      socials: {
        x: "https://x.com/vincent",
        linkedin: "https://linkedin.com/in/vincent",
        github: "https://github.com/vincent",
        email: "mailto:vincent@geohabari.com"
      }
    },
    {
      name: "JohnMark Ochieng",
      bio: "Johnmark Ochieng - Johnmark is a space communicator making space simple. Big on hiking and adventure, bigger on adrenaline. I think better at altitude.",
      position: "Space Communicator",
      profile_photo: "/images/team/jmochieng.jpeg",
      socials: {
        x: "https://x.com/johnmarkochieng",
        linkedin: "https://linkedin.com/in/johnmarkochieng",
        github: "https://github.com/johnmarkochieng",
        email: "mailto:johnmarkochieng@geohabari.com"
      }
    }
  ];


  // Get DOM elements
  const thumbnails = document.querySelectorAll('.team-thumbnail');
  const mainPhoto = document.getElementById('main-photo');
  const spotlightName = document.getElementById('spotlight-name');
  const spotlightRole = document.getElementById('spotlight-role');
  const spotlightBio = document.getElementById('spotlight-bio');
  const socialLinks = document.getElementById('social-links');
  const teamCarousel = document.querySelector('.team-carousel');

  let currentIndex = 0;
  let autoPlayInterval;
  let isAnimating = false;

  // Function to update spotlight content
  function updateSpotlight(index, animate = true) {
    if (isAnimating && animate) return;
    
    const member = teamMembers[index];
    currentIndex = index;

    // Update active thumbnail
    thumbnails.forEach((thumb, i) => {
      thumb.classList.toggle('active', i === index);
    });

    if (animate) {
      isAnimating = true;
      
      // Animate out
      gsap.to([mainPhoto, spotlightName, spotlightRole, spotlightBio, socialLinks], {
        opacity: 0,
        x: 30,
        duration: 0.3,
        ease: "power2.out",
        onComplete: function() {
          // Update content
          updateContent(member);
          
          // Animate in
          gsap.to([mainPhoto, spotlightName, spotlightRole, spotlightBio, socialLinks], {
            opacity: 1,
            x: 0,
            duration: 0.4,
            ease: "power2.out",
            stagger: 0.05,
            onComplete: function() {
              isAnimating = false;
            }
          });
        }
      });
    } else {
      updateContent(member);
    }
  }

  // Function to update content without animation
  function updateContent(member) {
    mainPhoto.src = member.profile_photo;
    mainPhoto.alt = member.name;
    spotlightName.textContent = member.name;
    spotlightRole.textContent = member.position;
    spotlightBio.textContent = member.bio;

    // Update social links
    socialLinks.innerHTML = '';
    Object.entries(member.socials).forEach(([platform, url]) => {
      const link = document.createElement('a');
      link.href = url;
      link.target = '_blank';
      link.rel = 'noopener noreferrer';
      link.textContent = platform.charAt(0).toUpperCase() + platform.slice(1);
      socialLinks.appendChild(link);
    });
  }

  // Auto-play functionality
  function startAutoPlay() {
    autoPlayInterval = setInterval(() => {
      const nextIndex = (currentIndex + 1) % teamMembers.length;
      updateSpotlight(nextIndex, true);
    }, 5000);
  }

  function stopAutoPlay() {
    if (autoPlayInterval) {
      clearInterval(autoPlayInterval);
    }
  }

  function resetAutoPlay() {
    stopAutoPlay();
    startAutoPlay();
  }

  // Add click event listeners to thumbnails
  thumbnails.forEach((thumbnail, index) => {
    thumbnail.addEventListener('click', function() {
      if (index !== currentIndex && !isAnimating) {
        updateSpotlight(index, true);
        resetAutoPlay();
      }
    });
  });

  // Pause auto-play on hover
  teamCarousel.addEventListener('mouseenter', stopAutoPlay);
  teamCarousel.addEventListener('mouseleave', startAutoPlay);

  // Initialize carousel
  updateSpotlight(0, false);
  
  // Start auto-play after a short delay
  setTimeout(() => {
    startAutoPlay();
  }, 5000);

  // Initial animations
  //gsap.from('.team-thumbnail', {
  //  opacity: 0,
  //  y: 20,
  //  duration: 0.6,
  //  stagger: 0.1,
  //  ease: "power2.out"
  //});

  // gsap.from(['.spotlight-image', '.spotlight-details'], {
    // opacity: 0,
    // x: 30,
    // duration: 0.8,
    // stagger: 0.2,
    // ease: "power2.out",
    // delay: 0.3
  // });
});
</script>